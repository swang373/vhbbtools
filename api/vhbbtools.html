
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>vhbbtools &#8212; vhbbtools 0.1.0.a4 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0.a4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A Python package for CMS physics analyses using VHiggsBB ntuples.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=swang373&repo=vhbbtools&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribution.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../third_party_licenses.html">Third-Party Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-vhbbtools"></span><div class="section" id="vhbbtools">
<h1>vhbbtools<a class="headerlink" href="#vhbbtools" title="Permalink to this headline">¶</a></h1>
<p>This Python package provides classes and functions which ease the development
of CMS physics analyses using ntuples generated by the VHiggsBB Heppy framework.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body"><ol class="first loweralpha simple" start="3">
<li>2017 by Sean-Jiun Wang.</li>
</ol>
</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body"><p class="first last">MIT, see LICENSE for more details.</p>
</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="vhbbtools.Dataset">
<em class="property">class </em><code class="descclassname">vhbbtools.</code><code class="descname">Dataset</code><span class="sig-paren">(</span><em>selection=None</em>, <em>chunk_size=2000</em>, <em>redirector=None</em>, <em>valid=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>The abstract Dataset class.</p>
<p>Concrete subclasses are defined by overriding the following class attributes:</p>
<dl class="docutils">
<dt>name <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>The fully qualified name of the dataset of the form
“/primary_dataset/processed_dataset/data_tier”.
The wildcard character “*” is not permitted.</dd>
<dt>dbs_instance <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">One of the following DBS server instances where the dataset is
registered:</p>
<blockquote class="last">
<div><ul class="simple">
<li>global (default)</li>
<li>phys01</li>
<li>phys02</li>
<li>phys03</li>
<li>caf</li>
</ul>
</div></blockquote>
</dd>
<dt>files <span class="classifier-delimiter">:</span> <span class="classifier">list of paths or urls, optional</span></dt>
<dd>The paths or urls of the dataset’s files.</dd>
<dt>cross_section <span class="classifier-delimiter">:</span> <span class="classifier">numeric, optional</span></dt>
<dd>The cross section in units of picobarns (pb). This attribute should
only be overridden for datasets which are Monte Carlo samples.</dd>
</dl>
<p>Iterating over a Dataset yields handles to the events contained in the files
registered on DBS unless the <a class="reference internal" href="#vhbbtools.Dataset.files" title="vhbbtools.Dataset.files"><code class="xref py py-attr docutils literal"><span class="pre">files</span></code></a> attribute is overridden.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>selection</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em>, </em><em>optional</em>) – An initial selection applied to the dataset’s events.</li>
<li><strong>chunk_size</strong> (<em>numeric</em><em>, </em><em>optional</em>) – The maximum chunk size in megabytes (MB) for iterating over the
dataset’s events. The chunk size is defined as the sum of the sizes
of the dataset’s files passed to the event handler. This is ignored
when overriding the <a class="reference internal" href="#vhbbtools.Dataset.files" title="vhbbtools.Dataset.files"><code class="xref py py-attr docutils literal"><span class="pre">files</span></code></a> attribute. The default is 2000 MB.</li>
<li><strong>valid</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>optional</em>) – Only iterate over files marked as valid on DBS. This is ignored when
overriding the <a class="reference internal" href="#vhbbtools.Dataset.files" title="vhbbtools.Dataset.files"><code class="xref py py-attr docutils literal"><span class="pre">files</span></code></a> attribute. The default is True.</li>
<li><strong>redirector</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em>, </em><em>optional</em>) – <p>The url of the XRootD redirector server used to locate and access
the dataset’s files. The following regional redirector aliases are
also recognized:</p>
<blockquote>
<div><ul>
<li>global (default)</li>
<li>fnal</li>
<li>infn</li>
</ul>
</div></blockquote>
<p>This is ignored when overriding the <a class="reference internal" href="#vhbbtools.Dataset.files" title="vhbbtools.Dataset.files"><code class="xref py py-attr docutils literal"><span class="pre">files</span></code></a> attribute.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="vhbbtools.Dataset.DATASET_NAME_FORMAT_RE">
<code class="descname">DATASET_NAME_FORMAT_RE</code><em class="property"> = &lt;_sre.SRE_Pattern object&gt;</em><a class="headerlink" href="#vhbbtools.Dataset.DATASET_NAME_FORMAT_RE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.cross_section">
<code class="descname">cross_section</code><em class="property"> = None</em><a class="headerlink" href="#vhbbtools.Dataset.cross_section" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.datatype">
<code class="descname">datatype</code><a class="headerlink" href="#vhbbtools.Dataset.datatype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.dbs_dataset_record">
<code class="descname">dbs_dataset_record</code><a class="headerlink" href="#vhbbtools.Dataset.dbs_dataset_record" title="Permalink to this definition">¶</a></dt>
<dd><p>The dataset’s information registered with DBS.</p>
</dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.dbs_file_records">
<code class="descname">dbs_file_records</code><a class="headerlink" href="#vhbbtools.Dataset.dbs_file_records" title="Permalink to this definition">¶</a></dt>
<dd><p>The dataset’s file information registered with DBS.</p>
</dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.dbs_instance">
<code class="descname">dbs_instance</code><em class="property"> = 'global'</em><a class="headerlink" href="#vhbbtools.Dataset.dbs_instance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.files">
<code class="descname">files</code><em class="property"> = None</em><a class="headerlink" href="#vhbbtools.Dataset.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Dataset.name">
<code class="descname">name</code><em class="property"> = None</em><a class="headerlink" href="#vhbbtools.Dataset.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vhbbtools.Events">
<em class="property">class </em><code class="descclassname">vhbbtools.</code><code class="descname">Events</code><span class="sig-paren">(</span><em>*filenames</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events" title="Permalink to this definition">¶</a></dt>
<dd><p>A reusable context manager for handling VHiggsBB ntuples.</p>
<p>Entering the context opens the files for reading, provides attribute
access to count histograms, and sets the initial state by selecting
events and deactivating branches if specified.</p>
<p>Exiting the context resets the state, deletes the count histogram
attributes, and closes the file handles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*filenames</strong> (<em>paths</em><em> or </em><em>urls</em>) – The paths or urls of the ntuples.</li>
<li><strong>selection</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – The selection applied to the events upon entering the context.
The default is no selection.</li>
<li><strong>ignore_branches</strong> (<em>list of strings</em><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – The names of the branches to deactivate upon entering the context,
after the initial selection has been applied. The default is to
keep all branches active.</li>
<li><strong>download</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – Reading remote files using the XRootD protocol can result in
significantly worse performance in terms of speed compared to
local files. If True, the remote files are downloaded to a
local temporary directory for reading. The default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="vhbbtools.Events.activate">
<code class="descname">activate</code><span class="sig-paren">(</span><em>*branches</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.activate" title="Permalink to this definition">¶</a></dt>
<dd><p>Activate branches.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*branches</strong> (<em>strings</em>) – The names of the branches to activate. Wildcarded TRegexp
expressions such as “a*b” or “a*b*” are also valid. Unrecognized
branches are ignored.</li>
<li><strong>exclusive</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – If True, all other branches are deactivated. The default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Events.branches">
<code class="descname">branches</code><a class="headerlink" href="#vhbbtools.Events.branches" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of branches.</p>
</dd></dl>

<dl class="method">
<dt id="vhbbtools.Events.count">
<code class="descname">count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of events that pass the selections applied.</p>
</dd></dl>

<dl class="method">
<dt id="vhbbtools.Events.deactivate">
<code class="descname">deactivate</code><span class="sig-paren">(</span><em>*branches</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.deactivate" title="Permalink to this definition">¶</a></dt>
<dd><p>Deactivate branches.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*branches</strong> (<em>strings</em>) – The names of the branches to deactivate. Wildcarded TRegexp
expressions such as “a*b” or “a*b*” are also valid. Unrecognized
branches are ignored.</li>
<li><strong>exclusive</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – If True, all other branches are activated. The default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="vhbbtools.Events.draw">
<code class="descname">draw</code><span class="sig-paren">(</span><em>expression</em>, <em>selection=''</em>, <em>options='goff'</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.draw" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for the Draw method that accepts keyword arguments.</p>
<p>See the documentation of TTree.Draw for information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expression</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – The draw expression.</li>
<li><strong>selection</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em>, </em><em>optional</em>) – The selection expression.</li>
<li><strong>options</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em>, </em><em>optional</em>) – The draw options. The default is ‘goff’ to disable graphics.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="vhbbtools.Events.eventlist">
<code class="descname">eventlist</code><a class="headerlink" href="#vhbbtools.Events.eventlist" title="Permalink to this definition">¶</a></dt>
<dd><p>The current eventlist.</p>
</dd></dl>

<dl class="method">
<dt id="vhbbtools.Events.iterselected">
<code class="descname">iterselected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.iterselected" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the events that pass the selections applied.</p>
</dd></dl>

<dl class="method">
<dt id="vhbbtools.Events.select">
<code class="descname">select</code><span class="sig-paren">(</span><em>selection</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a selection on the events.</p>
<p>If selections have already been applied, only the
current subset of passing events are considered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>selection</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – The selection expression.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="vhbbtools.Events.to_root">
<code class="descname">to_root</code><span class="sig-paren">(</span><em>dst</em>, <em>optimize=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.Events.to_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the selected events and count histograms to a ROOT file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dst</strong> (<em>path</em>) – The path of the output ROOT file.</li>
<li><strong>optimize</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, optimize the storage of events in the output ROOT file.
The default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="vhbbtools.xrdcp">
<code class="descclassname">vhbbtools.</code><code class="descname">xrdcp</code><span class="sig-paren">(</span><em>src</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.xrdcp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a file using the xrdcp command.</p>
<p>Until the XRootD Python bindings are fully supported and stable in CMSSW,
the copying functionality relies on the xrdcp executable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>src</strong> (<em>path</em><em> or </em><em>url</em>) – The path or remote url of the source file.</li>
<li><strong>dst</strong> (<em>path</em><em> or </em><em>url</em><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – The path or remote url of the destination.
The default is the current working directory.</li>
<li><strong>force</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – A flag to allow existing copies to be overwritten.
The default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="vhbbtools.multixrdcp">
<code class="descclassname">vhbbtools.</code><code class="descname">multixrdcp</code><span class="sig-paren">(</span><em>*srcs</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#vhbbtools.multixrdcp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy files in parallel using the xrdcp command.</p>
<p>The xrdcp executable has a “–parallel” option, but limits the number of
copy jobs to at most four. A ProcessPoolExecutor allows the maximum number
of available cores to be utilized.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*srcs</strong> (<em>paths</em><em> or </em><em>urls</em>) – The paths or remote urls of the source files.</li>
<li><strong>dst</strong> (<em>path</em><em> or </em><em>url</em><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – The path or remote url of the destination.
The default is the current working directory.</li>
<li><strong>force</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em>, </em><em>keyword only</em><em>, </em><em>optional</em>) – A flag to allow existing copies to be overwritten.
The default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2017, Sean-Jiun Wang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/api/vhbbtools.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>